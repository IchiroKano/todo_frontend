<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <title>ToDo App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script type="text/javascript" src="crud.js"></script>

  <script>
    //  document.addEventListener("DOMContentLoaded", function(){ getName('uncomplete'); });
    // IDを取得し、サーバーからデータを検索
    function getQueryParams() {
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id'); // クエリパラメータから `id` を取得

        // IDがある場合はデータを取得する
        if (id) {
          document.getElementById('inputMyID').value = id;
          getNameByID(id);
        } else {
          document.getElementById('inputMyID').value = 'エラー：IDを指定してください';
        } 
    }
  </script>
</head>

<body style="background-color:lightblue;" class="p-3">
  <h1>ToDoタスクを変更する</h1>
  <div id="token"></div>
  <div id="output"></div>

  <button onclick="window.location.href='index.html';" class="btn btn-secondary" style="float:right;">
    <i class="bi bi-reply"></i> 戻る
  </button>

  <p>ID:<input type="text" id="inputMyID" readonly style="background-color: transparent; border: none;"></p>

  <!-- 完了フラグをチェックボックスで置き換える -->
  <div id="outputFlag"></div>

  <div class="mb-3 mt-3">
    <label for="inputPlan" class="form-label">やること：</label>
    <textarea class="form-control" id="inputPlan" rows="3"></textarea>
  </div>

  <div class="mb-3 mt-3">
    <label for="inputResult" class="form-label">実績：</label>
    <textarea class="form-control" id="inputResult" rows="3"></textarea>
  </div>

  <button onclick="updateName(); window.location.href='index.html';" class="btn btn-primary">データを更新</button>
  <button onclick="deleteName(); window.location.href='index.html';" class="btn btn-danger">データを削除</button>

  <div id="server" hidden></div>

  <script>
    getQueryParams();
  </script>

</body>
</html>
